<html xmlns:ui="http://java.sun.com/jsf/facelets"
      template="../../template/mainTemplate.xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui">
    <h:body>
        <ui:composition>
            <b:panel title="Datos de la Factura" look="primary" style="width: 90%; min-width: 400px; margin: 0px auto">
                <p:growl id="messages"/>
                <p:outputPanel id="pnlDatosFact">
                    <b:container id="pnlEncabezado" style="width: 100%">
                        <b:row>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="Número:"/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="12">
                                <b:inputText disabled="true" value="#{verFacturaController.factura.factNumero}" id="txtNumero"/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="6">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-md="3" col-sm="3" col-xs="6">
                                <h:outputText value=""/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="CI/RUC: "/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="8">
                                <b:inputText disabled="true" value="#{verFacturaController.factura.clieId.persCedula}" id="txtCedula"/>

                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="4">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="Fecha: "/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="12">
                                <b:inputText  value="#{verFacturaController.formateaFecha(verFacturaController.factura.factFecha)}" disabled="true" id="txtFecha"/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value=""/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="Cliente: "/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="12">
                                <b:inputText  value="#{verFacturaController.factura.clieId.persNombres} #{verFacturaController.factura.clieId.persApellidos}" disabled="true" id="txtCliente"/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="Dirección: "/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="12">
                                <b:inputText  value="#{verFacturaController.factura.clieId.persDireccion}" disabled="true" id="txtDireccion"/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value=""/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="Teléfono: "/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="12">
                                <b:inputText  value="#{verFacturaController.factura.clieId.persTelefono}" disabled="true" id="txtTelefono"/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value="N.Guía: "/>
                            </b:column>
                            <b:column col-md="4" col-sm="4" col-xs="12">
                                <b:inputText value="#{verFacturaController.guia}" id="txtGuia"/>
                            </b:column>
                            <b:column col-md="1" col-sm="1" col-xs="12">
                                <h:outputText value=""/>
                            </b:column>
                        </b:row>
                    </b:container>
                </p:outputPanel>
            </b:panel>
            <b:panel title="Detalle de la Factura" look="primary" style="width: 90%; min-width: 400px; margin: 0px auto">
                <p:outputPanel id="pnlProd">
                    <p:dataTable styleClass=""  style="width: 100%" var="item" value="#{verFacturaController.factura.detalleFacturaList}" id="tblItems"  paginator="true" rows="15" paginatorPosition="bottom" tableStyleClass="ui-table-columntoggle" widgetVar="tablaItems">               
                        <f:facet name="header">
                            <h:outputText value="Detalle de La Factura"/>
                        </f:facet>           
                        <p:column headerText="CANTIDAD" priority="1" style="width: 10%">
                            <h:outputText value="#{item.defaCantidad}"/>
                        </p:column>
                        <p:column headerText="DESCRIPCION" priority="1" style="width:34%">
                            <h:outputText value="#{item.artiId.artiDescripcion}"/>
                        </p:column>
                        <p:column headerText="P.Venta" priority="1" style="width: 10%">
                            <h:outputText value="#{verFacturaController.Formato(item.defaPrecioVenta)}"/>
                        </p:column>
                        <p:column headerText="V. Total" priority="1" style="width: 10%">
                            <h:outputText value="#{verFacturaController.Formato(item.defaPrecioVenta*item.defaCantidad)}"/>
                        </p:column>
                        <p:column headerText="Iva" priority="1" style="width: 6%">
                            <h:outputText value="#{item.artiId.artiIva?'SI':'NO'}"/>
                        </p:column>
                        <p:column headerText="Observaciones" priority="2" style="width: 30%" >
                            <h:outputText value="#{item.defaObservaciones}"/>
                        </p:column>
                    </p:dataTable>   
                </p:outputPanel>
                <p:outputPanel id="pnlResultados" style="width: 100%;">

                    <b:container id="ctnResultados" style="width: 100%;">
                        <b:row>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="0" col-md="7" col-sm="7">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="12" col-md="1" col-sm="1" style="text-align: right;">
                                <h:outputText value="Subtotal: "/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2">
                                <b:inputText value="#{verFacturaController.Formato(verFacturaController.factura.factSubtotalConIva + verFacturaController.factura.factSubtotalSinIva)}" id="txtSubtotal" disabled="true" styleClass="textosFactura"/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="0" col-md="6" col-sm="6">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2" style="text-align: right;">
                                <h:outputText value="Subtotal Sin Iva: "/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2">
                                <b:inputText value="#{verFacturaController.Formato(verFacturaController.factura.factSubtotalSinIva)}" id="txtSubtotalSinIva" disabled="true" styleClass="textosFactura"/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="0" col-md="6" col-sm="6">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2" style="text-align: right;">
                                <h:outputText value="Subtotal Con Iva: "/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2">
                                <b:inputText value="#{verFacturaController.Formato(verFacturaController.factura.factSubtotalConIva)}" id="txtSubtotalConIva" disabled="true" styleClass="textosFactura"/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="6" col-md="1" col-sm="1">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="0" col-md="6" col-sm="6">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2" style="text-align: right;">
                                <h:outputText value="Descuento: "/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2">
                                <b:inputText value="#{verFacturaController.factura.factDescuento}" id="txtDescuento" disabled="true" styleClass="textosFactura"/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column col-xs="6" col-md="2" col-sm="2" rendered="#{!verFacturaController.anulada}">
                                <h:outputText value="" />
                            </b:column>
                            <b:column col-xs="6" col-md="2" col-sm="2" rendered="#{verFacturaController.anulada}">
                                <h2><span style="color: #FF2029;"><h:outputText value="ANULADA" /></span></h2>
                            </b:column>

                            <b:column col-xs="0" col-md="6" col-sm="6">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2" style="text-align: right;">
                                <h:outputText value="IVA: "/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2">
                                <b:inputText value="#{verFacturaController.Formato(verFacturaController.factura.factIva)}" id="txtIva" disabled="true" styleClass="textosFactura"/>
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column  col-xs="6" col-md="5" col-sm="5">
                                <p:commandButton rendered="#{verFacturaController.puedeAnular}" action="#{verFacturaController.anular()}" update="messages pnlResultados" value="Anular Factura" styleClass="botonesMantenimientos btn-danger btn-lg" style="width: 120px;">
                                     <p:confirm  header="Anular Factura" message="¿Está Seguro?" icon="ui-icon-alert" />
                                </p:commandButton>
                                <p:commandButton value="Salir" action="#{verFacturaController.salir()}" styleClass="botonesMantenimientos btn-danger btn-lg"/>
                            </b:column>
                            <b:column col-xs="0" col-md="3" col-sm="3">
                                <h:outputText value=""/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2" style="text-align: right;">
                                <h:outputText value="TOTAL: "/>
                            </b:column>
                            <b:column col-xs="12" col-md="2" col-sm="2">
                                <b:inputText value="#{verFacturaController.Formato(verFacturaController.factura.factTotal)}" id="txtTotal" disabled="true" styleClass="textosFactura"/>
                            </b:column>
                        </b:row>
                    </b:container>
                </p:outputPanel>
                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" style="width: 300px;">
                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                </p:confirmDialog>
            </b:panel>
        </ui:composition> 
    </h:body>
</html>